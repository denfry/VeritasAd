# VeritasAD Backend Configuration
# Для локальной разработки скопируйте этот файл в .env

# ==================== PROJECT SETTINGS ====================
PROJECT_NAME=VeritasAD
API_V1_STR=/api/v1
VERSION=1.0.0
DEBUG=True
ENVIRONMENT=development

# ==================== SERVER ====================
HOST=0.0.0.0
PORT=8000
WORKERS=1
RELOAD=True

# ==================== DATABASE ====================
# SQLite для разработки (проще для локального тестирования)
DATABASE_URL=sqlite+aiosqlite:///./veritasad_dev.db

# PostgreSQL для production
# DATABASE_URL=postgresql+asyncpg://veritasad:veritasad123@localhost:5432/veritasad

# Database pool settings
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=10
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600
DB_ECHO=False

# ==================== REDIS ====================
REDIS_URL=redis://localhost:6379/0
REDIS_MAX_CONNECTIONS=50

# ==================== CELERY ====================
CELERY_BROKER_URL=redis://localhost:6379/0
CELERY_RESULT_BACKEND=redis://localhost:6379/1
CELERY_TASK_TRACK_STARTED=True
CELERY_TASK_TIME_LIMIT=600
CELERY_WORKER_PREFETCH_MULTIPLIER=1
CELERY_WORKER_MAX_TASKS_PER_CHILD=50

# ==================== SECURITY ====================
# CORS
CORS_ORIGINS=["http://localhost:3000","http://localhost:8000"]
CORS_ALLOW_CREDENTIALS=True

# Trusted hosts
TRUSTED_HOSTS=["localhost","*.localhost"]

# API Key settings
API_KEY_LENGTH=32
API_KEY_HEADER=X-API-Key

# Отключение авторизации для тестирования (development only!)
# Внимание: Это отключает проверку прав доступа - используйте ТОЛЬКО локально!
DISABLE_AUTH=false

# JWT settings
# Сгенерируйте уникальные ключи для production!
# Для development можно использовать эти:
SECRET_KEY=dev-secret-key-for-local-development-only-min-32-chars-ok
JWT_SECRET_KEY=dev-jwt-secret-key-for-local-development-only-this-is-long-enough-for-security-purposes-min-64-chars
JWT_ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7

# Supabase Auth (опционально)
SUPABASE_URL=
SUPABASE_ANON_KEY=
SUPABASE_JWT_SECRET=

# ==================== RATE LIMITING ====================
FREE_TIER_DAILY_LIMIT=100
PRO_TIER_DAILY_LIMIT=10000
ENTERPRISE_TIER_DAILY_LIMIT=999999
RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_BURST=10

# ==================== FILE PROCESSING ====================
MAX_VIDEO_DURATION=600
MAX_FILE_SIZE=2147483648
ALLOWED_VIDEO_EXTENSIONS=[".mp4",".avi",".mov",".mkv",".webm"]
CHUNK_SIZE=1048576

TEMP_FILE_MAX_AGE_HOURS=24
CLEANUP_INTERVAL_MINUTES=60

# ==================== VIDEO DOWNLOAD ====================
DOWNLOAD_TIMEOUT=180
DOWNLOAD_RETRIES=3
DOWNLOAD_CONCURRENT_FRAGMENTS=4
DOWNLOAD_SOCKET_TIMEOUT=30
DOWNLOAD_FRAGMENT_RETRIES=5
USE_ARIA2C=False

# ==================== ML MODELS ====================
USE_LLM=False
WHISPER_MODEL=tiny
CLIP_MODEL=openai/clip-vit-base-patch32
TORCH_DEVICE=cpu

# Model cache
HF_HOME=/app/models/cache
TRANSFORMERS_CACHE=/app/models/cache

# ==================== PATHS ====================
DATA_DIR=/app/data
MODELS_DIR=/app/models
REPORTS_DIR=/app/data/reports
TEMP_DIR=/app/data/temp
UPLOAD_DIR=/app/data/uploads

# ==================== TELEGRAM BOT ====================
# Telegram Bot Token (from @BotFather)
TELEGRAM_BOT_TOKEN=

# Telegram API ID and Hash (for MTProto, optional)
TELEGRAM_API_ID=
TELEGRAM_API_HASH=

# Telegram Webhook (optional, for production)
TELEGRAM_WEBHOOK_URL=
TELEGRAM_WEBHOOK_PATH=/webhook/telegram

# Telegram Bot Username (for Login Widget)
# Example: VeritasAdBot
NEXT_PUBLIC_TELEGRAM_BOT_USERNAME=

# ==================== PAYMENT ====================
YOOKASSA_SHOP_ID=
YOOKASSA_SECRET_KEY=
YOOKASSA_RETURN_URL=http://localhost:8000/payment/success

# ==================== MONITORING ====================
SENTRY_DSN=
LOG_LEVEL=DEBUG
LOG_FORMAT=text
ENABLE_METRICS=True
ENABLE_TRACING=False
OTEL_SERVICE_NAME=veritasad-backend
OTEL_EXPORTER_OTLP_ENDPOINT=

# ==================== EMAIL (Optional) ====================
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=
SMTP_PASSWORD=
SMTP_FROM=VeritasAD <noreply@localhost>

# ==================== EXTERNAL SERVICES ====================
OPENAI_API_KEY=

# S3 Storage
S3_BUCKET=
S3_REGION=
S3_ACCESS_KEY=
S3_SECRET_KEY=
